<!doctype html>
<html>
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Login</title><link rel="stylesheet" href="assets/css/style.css"></head>
<body>
<div class="container card" style="max-width:420px;margin:40px auto">
  <h2>Login</h2>
  <div class="form-row"><input id="email" placeholder="Email"></div>
  <div class="form-row"><input id="password" type="password" placeholder="Password"></div>
  <div class="form-row"><button id="loginBtn">Login</button></div>
  <p class="small">Don't have an account? <a href="register.html">Register</a></p>
</div>
<script src="assets/js/config.js"></script>
<script src="assets/js/app.js"></script>
<script>
document.getElementById('loginBtn').onclick = async function(){
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  if(!email || !password) return alert('Provide email and password');
  const res = await apiFetch('/api/auth/login', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email, password }) });
  if(res.ok && res.data.token){ saveUser(res.data.user, res.data.token); location.href='dashboard.html'; }
  else alert(res.data.error || res.data.message || 'Login failed');
}
</script>
</body></html>
